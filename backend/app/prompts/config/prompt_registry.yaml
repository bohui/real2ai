# Central registry of all prompts with metadata and organization

registry:
  system_prompts:
    analysis_core:
      path: "system/analysis_core.md"
      category: "base"
      priority: 100
      dependencies: []
      description: "Core AI assistant behavior and personality"
      
    document_core:
      path: "system/document_core.md"
      category: "base"
      priority: 100
      dependencies: []
      description: "Document processing standards and operational framework"
      
    assistant_core:
      path: "system/assistant_core.md"
      category: "base"
      priority: 100
      dependencies: ["analysis_core", "document_core"]
      description: "Core AI assistant behavior and personality"
      required_for: ["contract_analysis_complete", "ocr_extraction_specialized"]
      
    reasoning_framework:
      path: "system/realestate_lawyer.md"
      category: "base"
      priority: 90
      dependencies: ["assistant_core"]
      description: "Logical reasoning and analysis framework"
      
    legal_specialist:
      path: "system/realestate_lawyer.md"
      category: "domain"
      priority: 80
      dependencies: ["assistant_core"]
      description: "Legal domain expertise and analysis capabilities"
      required_for: ["contract_analysis_complete", "risk_assessment_comprehensive"]
      
    ocr_processor:
      path: "system/ocr_processor.md"
      category: "domain"
      priority: 70
      dependencies: ["assistant_core"]
      description: "OCR processing and document extraction behavior"
      required_for: ["ocr_extraction_specialized"]
      
    australian_legal:
      path: "system/conveyancer.md"
      category: "context"
      priority: 85
      dependencies: ["legal_specialist"]
      description: "Australian legal system context and terminology"

    entity_extraction_core:
      path: "system/entity_extraction_core.md"
      category: "extraction"
      priority: 110
      dependencies: []
      description: "Standards and rules for structured entity extraction"

    step2_section_analysis:
      path: "system/step2_section_analysis.md"
      category: "analysis"
      priority: 85
      dependencies: ["legal_specialist", "australian_legal"]
      description: "Step 2 section-by-section analysis framework and guidelines"

    step2_image_semantics:
      path: "system/step2_image_semantics.md"
      category: "analysis"
      priority: 95
      dependencies: ["legal_specialist", "australian_legal"]
      description: "Diagram/image semantics framework and risk focus for Step 2"

  user_prompts:
    contract_analysis_base:
      path: "user/analysis/contract_analysis_full.md"
      category: "analysis"
      system_requirements: ["legal_specialist", "australian_legal"]
      description: "Fragment-based comprehensive contract analysis instructions"
      estimated_tokens: 8000

    contract_term_extraction:
      path: "user/analysis/contract_term_extraction.md"
      category: "analysis"
      system_requirements: ["legal_specialist", "australian_legal"]
      description: "Contract term extraction and basic analysis"
      estimated_tokens: 8000
      
    contract_term_extraction:
      path: "user/analysis/contract_term_extraction.md"
      category: "analysis"
      system_requirements: ["legal_specialist", "australian_legal"]
      description: "Contract term extraction and basic analysis"
      estimated_tokens: 8000
      
    ocr_extraction_base:
      path: "user/ocr/ocr_extraction_base.md"
      category: "ocr"
      system_requirements: ["ocr_processor"]
      description: "Fragment-based OCR extraction and document processing instructions"
      estimated_tokens: 4000
      
    risk_assessment_base:
      path: "user/analysis/risk_assessment_legal.md"
      category: "analysis"
      system_requirements: ["legal_specialist", "australian_legal"]
      description: "Fragment-based risk assessment and evaluation instructions"
      estimated_tokens: 8000
      
    financial_analysis:
      path: "user/analysis/financial_analysis.md"
      category: "analysis"
      system_requirements: ["legal_specialist"]
      description: "Financial terms and obligations analysis"
      estimated_tokens: 5000
      
    quick_analysis:
      path: "user/analysis/contract_structure.md"
      category: "analysis"
      system_requirements: ["legal_specialist"]
      description: "Fast contract analysis for basic checks"
      estimated_tokens: 3000
      
    contract_recommendations:
      path: "user/analysis/contract_recommendations.md"
      category: "analysis"
      system_requirements: ["legal_specialist"]
      description: "Generate contract recommendations"
      estimated_tokens: 6000
      
    validation_workflow:
      path: "user/validation/document_quality_validation.md"
      category: "validation"
      system_requirements: ["assistant_core"]
      description: "Validation and quality assurance workflow"
      estimated_tokens: 2000

    # Validation templates
    validation_document_quality:
      path: "user/validation/document_quality_validation.md"
      category: "validation"
      system_requirements: ["assistant_core", "legal_specialist"]
      description: "Document quality validation template"
      estimated_tokens: 3000

    validation_final_output:
      path: "user/validation/final_output_validation.md"
      category: "validation" 
      system_requirements: ["assistant_core", "legal_specialist"]
      description: "Final output validation template"
      estimated_tokens: 2500

    validation_terms_completeness:
      path: "user/validation/terms_completeness_validation.md"
      category: "validation"
      system_requirements: ["assistant_core", "legal_specialist"]
      description: "Contract terms completeness validation template"
      estimated_tokens: 2000

    contract_entities_extraction:
      path: "user/analysis/step1/contract_entities_extraction.md"
      category: "analysis"
      system_requirements: ["entity_extraction_core"]
      description: "Extract entities from contracts using the ContractEntityExtraction schema"
      estimated_tokens: 6000

    section_seeds_planner:
      path: "user/analysis/step1/section_seeds_planner.md"
      category: "analysis"
      system_requirements: ["entity_extraction_core"]
      description: "High-signal snippet selection for Step 2 analyzers (no scoring)"
      estimated_tokens: 6000

    # Step 2 Section Analysis Prompts
    step2_parties_property:
      path: "user/analysis/step2/parties_property.md"
      category: "analysis"
      system_requirements: ["legal_specialist", "australian_legal"]
      description: "Step 2.1 - Parties and Property Verification Analysis"
      estimated_tokens: 6000

    step2_financial_terms:
      path: "user/analysis/step2/financial_terms.md"
      category: "analysis"
      system_requirements: ["legal_specialist", "australian_legal"]
      description: "Step 2.2 - Financial Terms Analysis and Verification"
      estimated_tokens: 6000

    step2_conditions:
      path: "user/analysis/step2/conditions.md"
      category: "analysis"
      system_requirements: ["legal_specialist", "australian_legal"]
      description: "Step 2.4 - Conditions Risk Assessment Analysis"
      estimated_tokens: 8000

    step2_warranties:
      path: "user/analysis/step2/warranties.md"
      category: "analysis"
      system_requirements: ["legal_specialist", "australian_legal"]
      description: "Step 2.5 - Warranties and Representations Analysis"
      estimated_tokens: 8000

    step2_default_termination:
      path: "user/analysis/step2/default_termination.md"
      category: "analysis"
      system_requirements: ["legal_specialist", "australian_legal"]
      description: "Step 2.6 - Default and Termination Analysis"
      estimated_tokens: 8000

    step2_settlement:
      path: "user/analysis/step2/settlement.md"
      category: "analysis"
      system_requirements: ["legal_specialist", "australian_legal"]
      description: "Step 2.7 - Settlement Logistics Analysis"
      estimated_tokens: 8000

    step2_title_encumbrances:
      path: "user/analysis/step2/title_encumbrances.md"
      category: "analysis"
      system_requirements: ["legal_specialist", "australian_legal"]
      description: "Step 2.8 - Title and Encumbrances Analysis with Diagram Integration"
      estimated_tokens: 10000

    step2_adjustments:
      path: "user/analysis/step2/adjustments.md"
      category: "analysis"
      system_requirements: ["legal_specialist", "australian_legal"]
      description: "Step 2.9 - Adjustments and Outgoings Calculator"
      estimated_tokens: 8000

    step2_disclosure:
      path: "user/analysis/step2/disclosure.md"
      category: "analysis"
      system_requirements: ["legal_specialist", "australian_legal"]
      description: "Step 2.10 - Disclosure Compliance Check"
      estimated_tokens: 8000

    step2_special_risks:
      path: "user/analysis/step2/special_risks.md"
      category: "analysis"
      system_requirements: ["legal_specialist", "australian_legal"]
      description: "Step 2.11 - Special Risks Identification"
      estimated_tokens: 8000

    step2_cross_validation:
      path: "user/analysis/step2/cross_validation.md"
      category: "analysis"
      system_requirements: ["legal_specialist", "australian_legal"]
      description: "Step 2.12 - Cross-Section Validation and Consistency Checks"
      estimated_tokens: 10000

    # Step 3 Synthesis Prompts
    step3_risk_aggregation:
      path: "user/analysis/step3/risk_aggregation.md"
      category: "analysis"
      system_requirements: ["australian_legal"]
      description: "Step 3 - Risk Aggregation and Prioritization"
      estimated_tokens: 6000

    step3_action_plan:
      path: "user/analysis/step3/action_plan.md"
      category: "analysis"
      system_requirements: ["australian_legal"]
      description: "Step 3 - Recommended Actions & Timeline"
      estimated_tokens: 7000

    step3_compliance_score:
      path: "user/analysis/step3/compliance_score.md"
      category: "analysis"
      system_requirements: ["australian_legal"]
      description: "Step 3 - Compliance Readiness Score"
      estimated_tokens: 6000

    step3_buyer_report:
      path: "user/analysis/step3/buyer_report.md"
      category: "analysis"
      system_requirements: ["australian_legal"]
      description: "Step 3 - Buyer Report Synthesis"
      estimated_tokens: 8000

    # Diagram-Specific Image Semantics Prompts
    image_semantics:
      path: "user/analysis/diagram_analysis/image_semantics.md"
      category: "analysis"
      system_requirements: ["step2_image_semantics", "australian_legal"]
      description: "Generic semantic analysis of property diagrams and images"
      estimated_tokens: 12000

    image_semantics_site_plan:
      path: "user/analysis/diagram_analysis/image_semantics_site_plan.md"
      category: "analysis"
      system_requirements: ["step2_image_semantics", "australian_legal"]
      description: "Site plan semantic analysis for property layout and boundaries"
      estimated_tokens: 8000

    image_semantics_sewer_service_diagram:
      path: "user/analysis/diagram_analysis/image_semantics_sewer_service_diagram.md"
      category: "analysis"
      system_requirements: ["step2_image_semantics", "australian_legal"]
      description: "Sewer service diagram semantic analysis for infrastructure mapping"
      estimated_tokens: 8000

    image_semantics_survey_diagram:
      path: "user/analysis/diagram_analysis/image_semantics_survey_diagram.md"
      category: "analysis"
      system_requirements: ["step2_image_semantics", "australian_legal"]
      description: "Survey diagram semantic analysis for precise boundaries and measurements"
      estimated_tokens: 8000

    image_semantics_flood_map:
      path: "user/analysis/diagram_analysis/image_semantics_flood_map.md"
      category: "analysis"
      system_requirements: ["step2_image_semantics", "australian_legal"]
      description: "Flood map semantic analysis for water risk assessment"
      estimated_tokens: 8000

    image_semantics_bushfire_map:
      path: "user/analysis/diagram_analysis/image_semantics_bushfire_map.md"
      category: "analysis"
      system_requirements: ["step2_image_semantics", "australian_legal"]
      description: "Bushfire map semantic analysis for fire risk assessment"
      estimated_tokens: 8000

    image_semantics_utility_plan:
      path: "user/analysis/diagram_analysis/image_semantics_utility_plan.md"
      category: "analysis"
      system_requirements: ["step2_image_semantics", "australian_legal"]
      description: "Utility plan semantic analysis for infrastructure services"
      estimated_tokens: 8000

    image_semantics_title_plan:
      path: "user/analysis/diagram_analysis/image_semantics_title_plan.md"
      category: "analysis"
      system_requirements: ["step2_image_semantics", "australian_legal"]
      description: "Title plan semantic analysis for legal boundaries and ownership"
      estimated_tokens: 8000

    image_semantics_zoning_map:
      path: "user/analysis/diagram_analysis/image_semantics_zoning_map.md"
      category: "analysis"
      system_requirements: ["step2_image_semantics", "australian_legal"]
      description: "Zoning map semantic analysis for development controls and land use"
      estimated_tokens: 8000

    image_semantics_environmental_overlay:
      path: "user/analysis/diagram_analysis/image_semantics_environmental_overlay.md"
      category: "analysis"
      system_requirements: ["step2_image_semantics", "australian_legal"]
      description: "Environmental overlay semantic analysis for environmental protection"
      estimated_tokens: 8000

    image_semantics_contour_map:
      path: "user/analysis/diagram_analysis/image_semantics_contour_map.md"
      category: "analysis"
      system_requirements: ["step2_image_semantics", "australian_legal"]
      description: "Contour map semantic analysis for topography and elevation"
      estimated_tokens: 8000

    image_semantics_drainage_plan:
      path: "user/analysis/diagram_analysis/image_semantics_drainage_plan.md"
      category: "analysis"
      system_requirements: ["step2_image_semantics", "australian_legal"]
      description: "Drainage plan semantic analysis for stormwater management"
      estimated_tokens: 8000

    image_semantics_building_envelope_plan:
      path: "user/analysis/diagram_analysis/image_semantics_building_envelope_plan.md"
      category: "analysis"
      system_requirements: ["step2_image_semantics", "australian_legal"]
      description: "Building envelope plan semantic analysis for development constraints"
      estimated_tokens: 8000

    image_semantics_development_plan:
      path: "user/analysis/diagram_analysis/image_semantics_development_plan.md"
      category: "analysis"
      system_requirements: ["step2_image_semantics", "australian_legal"]
      description: "Development plan semantic analysis for proposed development requirements"
      estimated_tokens: 10000

    image_semantics_aerial_view:
      path: "user/analysis/diagram_analysis/image_semantics_aerial_view.md"
      category: "analysis"
      system_requirements: ["step2_image_semantics", "australian_legal"]
      description: "Aerial view semantic analysis for contextual property assessment"
      estimated_tokens: 8000

    image_semantics_strata_plan:
      path: "user/analysis/diagram_analysis/image_semantics_strata_plan.md"
      category: "analysis"
      system_requirements: ["step2_image_semantics", "australian_legal"]
      description: "Strata plan semantic analysis for strata ownership structure"
      estimated_tokens: 8000

    image_semantics_heritage_overlay:
      path: "user/analysis/diagram_analysis/image_semantics_heritage_overlay.md"
      category: "analysis"
      system_requirements: ["step2_image_semantics", "australian_legal"]
      description: "Heritage overlay semantic analysis for heritage protection"
      estimated_tokens: 8000

    image_semantics_subdivision_plan:
      path: "user/analysis/diagram_analysis/image_semantics_subdivision_plan.md"
      category: "analysis"
      system_requirements: ["step2_image_semantics", "australian_legal"]
      description: "Subdivision plan semantic analysis for subdivision layout"
      estimated_tokens: 8000

    image_semantics_landscape_plan:
      path: "user/analysis/diagram_analysis/image_semantics_landscape_plan.md"
      category: "analysis"
      system_requirements: ["step2_image_semantics", "australian_legal"]
      description: "Landscape plan semantic analysis for vegetation requirements"
      estimated_tokens: 8000

    image_semantics_parking_plan:
      path: "user/analysis/diagram_analysis/image_semantics_parking_plan.md"
      category: "analysis"
      system_requirements: ["step2_image_semantics", "australian_legal"]
      description: "Parking plan semantic analysis for parking and vehicle circulation"
      estimated_tokens: 8000

    image_semantics_body_corporate_plan:
      path: "user/analysis/diagram_analysis/image_semantics_body_corporate_plan.md"
      category: "analysis"
      system_requirements: ["step2_image_semantics", "australian_legal"]
      description: "Body corporate plan semantic analysis for management structure"
      estimated_tokens: 8000

    image_semantics_off_the_plan_marketing:
      path: "user/analysis/diagram_analysis/image_semantics_off_the_plan_marketing.md"
      category: "analysis"
      system_requirements: ["step2_image_semantics", "australian_legal"]
      description: "Off-the-plan marketing semantic analysis for development marketing"
      estimated_tokens: 8000

    image_semantics_cross_section:
      path: "user/analysis/diagram_analysis/image_semantics_cross_section.md"
      category: "analysis"
      system_requirements: ["step2_image_semantics", "australian_legal"]
      description: "Cross section semantic analysis for vertical building analysis"
      estimated_tokens: 8000

    image_semantics_elevation_view:
      path: "user/analysis/diagram_analysis/image_semantics_elevation_view.md"
      category: "analysis"
      system_requirements: ["step2_image_semantics", "australian_legal"]
      description: "Elevation view semantic analysis for building facade analysis"
      estimated_tokens: 8000

    image_semantics_unknown:
      path: "user/analysis/diagram_analysis/image_semantics_unknown.md"
      category: "analysis"
      system_requirements: ["step2_image_semantics", "australian_legal"]
      description: "Generic diagram semantic analysis for unclassified diagram types"
      estimated_tokens: 8000

    step2_diagram_risk:
      path: "user/analysis/step2/diagram_risk.md"
      category: "analysis"
      system_requirements: ["step2_image_semantics", "australian_legal"]
      description: "Assess risks from diagram/image semantics output"
      estimated_tokens: 8000
      
    # clarification_prompts:
    #   path: "interactions/clarification.md"
    #   category: "interactions"
    #   description: "User clarification and follow-up prompts"
    #   estimated_tokens: 1000
      
    state_specific_instructions:
      path: "user/analysis/contract_analysis_base.md"
      category: "analysis"
      system_requirements: ["legal_specialist", "australian_legal"]
      description: "State-specific analysis instructions"
      estimated_tokens: 4000

    # OCR User Prompts
    ocr_text_diagram_insight:
      path: "user/ocr/text_diagram_insight.md"
      category: "ocr"
      system_requirements: ["ocr_processor", "legal_specialist"]
      description: "Extract insights from text and diagram content in documents"
      estimated_tokens: 3000

    ocr_whole_document_extraction:
      path: "user/ocr/whole_document_extraction.md"
      category: "ocr"
      system_requirements: ["ocr_processor", "legal_specialist"]
      description: "Extract text from entire document with OCR"
      estimated_tokens: 4000

    ocr_general_document_extraction:
      path: "user/ocr/general_document_extraction.md"
      category: "ocr"
      system_requirements: ["ocr_processor"]
      description: "General document text extraction and processing"
      estimated_tokens: 3000

    ocr_extraction:
      path: "user/ocr/ocr_extraction.md"
      category: "ocr"
      system_requirements: ["ocr_processor"]
      description: "Standard OCR text extraction template"
    layout_summarise:
      path: "user/ocr/layout_summarise.md"
      category: "ocr"
      system_requirements: ["ocr_processor"]
      description: "Clean text and extract basic contract taxonomy/terms"
      estimated_tokens: 2500

  shared_components:
    legal_terms:
      path: "shared/fragments/legal_terms.md"
      type: "fragment"
      reusable: true
      description: "Common Australian legal terminology definitions"
      
    formatting_rules:
      path: "shared/fragments/formatting_rules.md"
      type: "fragment"
      reusable: true
      description: "Output formatting standards and guidelines"
      
    validation_rules:
      path: "shared/fragments/validation_rules.md"
      type: "fragment"
      reusable: true
      description: "Input validation patterns and requirements"
      
    currency_formatting:
      path: "shared/macros/currency_formatting.md"
      type: "macro"
      reusable: true
      description: "Jinja2 macros for currency formatting"
      
    date_formatting:
      path: "shared/macros/date_formatting.md"
      type: "macro"
      reusable: true
      description: "Jinja2 macros for date formatting"


# Composition compatibility matrix
compatibility:
  model_requirements:
    gemini-2.5-flash:
      max_tokens: 32000
      supports_system_prompts: true
      optimal_temperature: [0.1, 0.4]
      
    gpt-4:
      max_tokens: 8000
      supports_system_prompts: true
      optimal_temperature: [0.0, 0.3]
      
    claude-3-opus:
      max_tokens: 16000
      supports_system_prompts: true
      optimal_temperature: [0.0, 0.5]

# Quality metrics and monitoring
quality_metrics:
  token_usage:
    target_efficiency: 0.85  # Tokens used / Total available
    max_composition_tokens: 24000
    warn_threshold: 0.90
    
  composition_complexity:
    max_system_prompts: 6
    max_user_prompts: 4
    max_nesting_depth: 3
    
  performance_targets:
    composition_time_ms: 500
    cache_hit_rate: 0.80
    validation_success_rate: 0.95