# Real2.AI Backend Configuration Example
# Copy this file to .env and fill in your values

# Environment
ENVIRONMENT=development
DEBUG=true

# Supabase Configuration
SUPABASE_URL=http://localhost:54321
SUPABASE_ANON_KEY=your_supabase_anon_key_here
SUPABASE_SERVICE_KEY=your_supabase_service_key_here

# OpenAI/LLM Configuration
OPENAI_API_KEY=your_openai_api_key_here
# Optional: Use OpenRouter or other providers
# OPENROUTER_API_KEY=your_openrouter_key_here
# OPENAI_API_BASE=https://openrouter.ai/api/v1

# JWT Token Configuration (Coordinated Expiry)
JWT_SECRET_KEY=your_jwt_secret_key_here
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=1  # Match Supabase access token (1 hour)

# Token Coordination Settings (NEW)
BACKEND_TOKEN_TTL_BUFFER_MINUTES=5  # Backend tokens expire 5 min before Supabase
TOKEN_REFRESH_THRESHOLD_MINUTES=10  # Refresh when 10 min or less remaining
AUTO_REFRESH_ENABLED=true  # Enable proactive token refresh
SUPABASE_ACCESS_TOKEN_TTL_MINUTES=60  # Standard Supabase access token TTL

# Auth Strategy
USE_BACKEND_TOKENS=true  # Use backend-issued tokens for better control

# Google Cloud Services (for OCR/Gemini)
GOOGLE_APPLICATION_CREDENTIALS=/secrets/gcp_key.json

# Redis Cache
REDIS_URL=redis://localhost:6379

# File Storage
MAX_FILE_SIZE=52428800  # 50MB
ALLOWED_FILE_TYPES=pdf,doc,docx,png,jpg,jpeg,webp,gif,bmp,tiff

# OCR Settings
ENABLE_GEMINI_OCR=true
GEMINI_MODEL_NAME=gemini-2.0-flash-exp
OCR_CONFIDENCE_THRESHOLD=0.7
FORCE_OCR_FOR_SCANNED_PDFS=true
OCR_MAX_FILE_SIZE_MB=50
OCR_MAX_PAGES_PER_DOCUMENT=100
OCR_PROCESSING_TIMEOUT_MINUTES=30

# OCR Queue Settings
OCR_QUEUE_MAX_WORKERS=5
OCR_QUEUE_MAX_RETRIES=3
OCR_BATCH_SIZE_LIMIT=20
OCR_PRIORITY_QUEUE_ENABLED=true

# Optional: Monitoring
# SENTRY_DSN=your_sentry_dsn_here
LOG_LEVEL=INFO

# Optional: External APIs
# STRIPE_SECRET_KEY=your_stripe_secret_key
# STRIPE_PUBLISHABLE_KEY=your_stripe_publishable_key
# DOMAIN_API_KEY=your_domain_api_key
# CORELOGIC_API_KEY=your_corelogic_api_key